{% assign_local c = "c-form-builder" %}
<form class="{{ c }} {{ c }}--{{ layout | default: 'single-column' }}"
    id="{{ id }}"
    action="{{ success_page }}"
    method="post"
    novalidate
    onsubmit="return validateFormSubmit(event, this)">

    {% for element in form_elements %}
        {% assign element_class = "" %}
        {% if layout == 'two-column' %}
            {% comment %} Full-width elements: textarea, checkbox-group, submit button {% endcomment %}
            {% if element._bookshop_name contains 'text-area-input' or element._bookshop_name contains 'checkbox-group' %}
                {% assign element_class = "c-form-builder__full-width" %}
            {% endif %}
        {% endif %}
        <div class="{{ element_class }}">
            {% bookshop "{{element._bookshop_name}}" bind: element %}
        </div>
    {% endfor %}

    <input type="text" name="_gotcha" style="display: none;">
    {% if inbox_key %}<input type="hidden" name="inbox_key" value="{{ inbox_key }}">{% endif %}
    {% if subject %}<input type="hidden" name="_subject" value="{{ subject }}">{% endif %}

    <div class="{{ c }}__submit-button">{% bookshop "generic/button" bind:submit_button %}</div>
</form>